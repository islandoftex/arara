% arara: pdflatex
% arara: pdflatex
% arara: biber
% arara: pdflatex
% arara: pdflatex
% arara: clean: { files: [ arara-usermanual.aux, arara-usermanual.bbl ] }
% arara: clean: { files: [ arara-usermanual.bcf, arara-usermanual.cod ] } 
% arara: clean: { files: [ arara-usermanual.blg, arara-usermanual.lof ] }
% arara: clean: { files: [ arara-usermanual.lot, arara-usermanual.out ] } 
% arara: clean: { files: [ arara-usermanual.toc, arara-usermanual.log ] } 
% arara: clean: { files: [ arara-usermanual.run.xml ] }
% -------------------------------------------------
% Arara -- the cool TeX automation tool
% Copyright (c) 2012, Paulo Roberto Massa Cereda
% All rights reserved.
%
% Redistribution and  use in source  and binary forms, with  or without
% modification, are  permitted provided  that the  following conditions
% are met:
%
% 1. Redistributions  of source  code must  retain the  above copyright
% notice, this list of conditions and the following disclaimer.
%
% 2. Redistributions in binary form  must reproduce the above copyright
% notice, this list  of conditions and the following  disclaimer in the
% documentation and/or other materials provided with the distribution.
%
% 3. Neither  the name  of the  project's author nor  the names  of its
% contributors may be used to  endorse or promote products derived from
% this software without specific prior written permission.
%
% THIS SOFTWARE IS  PROVIDED BY THE COPYRIGHT  HOLDERS AND CONTRIBUTORS
% "AS IS"  AND ANY  EXPRESS OR IMPLIED  WARRANTIES, INCLUDING,  BUT NOT
% LIMITED  TO, THE  IMPLIED WARRANTIES  OF MERCHANTABILITY  AND FITNESS
% FOR  A PARTICULAR  PURPOSE  ARE  DISCLAIMED. IN  NO  EVENT SHALL  THE
% COPYRIGHT HOLDER OR CONTRIBUTORS BE  LIABLE FOR ANY DIRECT, INDIRECT,
% INCIDENTAL, SPECIAL, EXEMPLARY,  OR CONSEQUENTIAL DAMAGES (INCLUDING,
% BUT  NOT LIMITED  TO, PROCUREMENT  OF SUBSTITUTE  GOODS OR  SERVICES;
% LOSS  OF USE,  DATA, OR  PROFITS; OR  BUSINESS INTERRUPTION)  HOWEVER
% CAUSED AND  ON ANY THEORY  OF LIABILITY, WHETHER IN  CONTRACT, STRICT
% LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY
% WAY  OUT  OF  THE USE  OF  THIS  SOFTWARE,  EVEN  IF ADVISED  OF  THE
% POSSIBILITY OF SUCH DAMAGE.
% -------------------------------------------------

\documentclass[a4paper,twoside,12pt]{memoir}

% packages
% -------------------------------------------------
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{arara}
% -------------------------------------------------

% bibliography
% -------------------------------------------------
\addbibresource{references.bib}
% -------------------------------------------------

% current version
% -------------------------------------------------
\newcommand{\araraversion}{3.0}
% -------------------------------------------------

% document
% -------------------------------------------------
\begin{document}

% title page
% -------------------------------------------------
\begin{titlingpage}

\begin{center}
\vspace*{2em}

\scalebox{1.15}{\araralogo}

\vspace{2em}

{\color{araracolor}\fontfamily{fco}\bfseries\Huge The cool \TeX{} automation tool}

\vspace{10em}

{\Huge\sffamily\bfseries User Manual}

\vspace{3em}

{\large
\tabcolsep=1em
\begin{tabular}{cc}
\multicolumn{2}{c}{Paulo R.\ M.\ Cereda}\\
\multicolumn{2}{c}{\url{cereda@users.sf.net}}\\[1.5em]
Marco Daniel & Brent Longborough\\
\url{marco.daniel@mada-nada.de} & \url{brent@longborough.org}
\end{tabular}}

\vfill

{\LARGE\sffamily\bfseries Version \araraversion}

\end{center}

\end{titlingpage}
% -------------------------------------------------

% set styles
% -------------------------------------------------
\chapterstyle{madsen}
\pagestyle{headings} 
\frontmatter
\nouppercaseheads
% -------------------------------------------------

% Prologue
% -------------------------------------------------
\chapter*{Prologue}
\label{chap:prologue}

\epigraph{\emph{Moral of the story: never read the documentation, bad things happen.}}{David Carlisle}

When I released the very first version of \arara on a Friday 13th, April 2012, I never thought it would receive so many positive comments and feedback. To be honest, since \arara was written for helping me with my own \LaTeX\ personal projects, I wondered if the tool could be of service to anyone else. And it seems it did. To a lot of people.

I never intended to release it to the whole world, since I wasn't sure if other people could benefit from \arara's features. After all, there's already a plethora of tools available to the \TeX\ community in general. The reason I decided to make \arara publicly available is quite simple: I want to contribute to the \TeX\ community, and I want to give my best to make it even more awesome.

I'm quite satisfied with the current state of \arara. We have a mature code and a great team of developers, translators and testers. Since version 1.0, the code evolved a lot -- new features, lots of bug fixes, improvements -- thanks to all comments I received. In my humble opinion, that's how a project should evolve: based on what our users want. I'm proud to see \arara being 100\% community-driven, it's a big achievement.

First of all, I'd like to thank some friends that really made \arara possible: Alan Munn, for providing great ideas and suggestions to the manual; Andrew Stacey, for testing \arara, providing great user cases, and for suggesting improvements to the program; Brent Longborough, a member of the core team, for providing great suggestions and ideas to the program logic, writing rules, testing the code and also for working with the Portuguese and Turkish translations; Clemens Niederberger, for testing \arara, and also writing a great tutorial about it in his \href{http://www.mychemistry.eu/2012/06/arara-automate-latex-birds-music/}{blog on chemistry and \LaTeX}; David Carlisle, for reminding me to work on \arara, and also encouraging me to write answers about it in our \TeX\ community; Enrico Gregorio, for reviewing the original manual, testing \arara, providing great ideas and suggestions to the manual and to the program itself, and for working with the Italian translation; Francesco Endrici, for providing the very first \arara rule outside our core team; Harish Kumar, for being a heavy \arara user and integrating it with WinEdt; \.Ilhan Polat for working with Brent in the Turkish translation; Joseph Wright, for testing it, providing contributed code for Linux and Mac installations, and also blogging about \arara in his 
     \href{http://www.texdev.net}{personal blog}; Gonzalo Medina, for providing the Spanish translation; Marco Daniel, one of core team members, for heavily testing \arara, suggesting enhancements to the manual and to the program itself, providing lots of contributed rules for common tasks, and also for the German version; Patrick Gundlach, for advertising \arara in the official Twitter channel of \href{http://www.dante.de}{DANTE} -- the German \TeX\ User Group; Stefan Kottwitz, for encouraging me to write an article about \arara, published in   the \href{http://latex-community.org/know-how/435-gnuplot-arara}{\LaTeX\ Community} forum, and also tweeting about it. Thank you very much.

That said, I still believe that the warning featured in the first version of this manual still applies: \textsc{Hic Sunt Dracones}. \arara is far from being bug-free. And you will see that \arara gives you enough rope. In other words, \emph{you} will be responsible for how \arara behaves and all the consequences from your actions. Sorry to sound scary, but I really needed to tell you this. After all, one of \arara's features is the freedom it offers. But as you know, freedom always comes at a cost. Please, don't send me angry letters -- or e-mails, perhaps.

Feedback is surely welcome for me to improve this humble tool, just write an 
e-mail to \url{cereda@users.sf.net} or any other author and we will reply as soon as possible. The source code is fully available at \url{http://github.com/cereda/arara}, feel free to contribute to the project by forking it, submitting bugs or sending pull requests. If you want to support \LaTeX\ development by a donation, the best way to do this is donating to the \href{http://www.tug.org/}{\TeX\ Users Group}. Please also  consider joining our \TeX\ community at \href{http://tex.stackexchange.com}{StackExchange}.

\vfill

\begin{flushright}
Paulo Roberto Massa Cereda\\
\emph{The author}
\end{flushright}
% -------------------------------------------------

\cleardoublepage

% Libraries
% -------------------------------------------------
\section*{Libraries}

\arara makes use of some specific opensource Java libraries in order to properly work. I would like to thank the following projects and their respective developers:

\begin{enumerate}
\item \href{http://commons.apache.org}{Apache Commons}, a project from the Apache Foundation focused on all aspects of reusable Java components. \arara uses three of the Commons libraries: \href{http://commons.apache.org/cli/}{CLI}, which provides a command Line arguments parser, \href{http://commons.apache.org/collections/}{Collections}, a library which  	extends the Java Collections Framework, and \href{http://commons.apache.org/exec/}{Exec}, an API for dealing with external process execution and environment management in Java.

\item \href{http://logback.qos.ch}{Logback}, a logging framework intended to be the successor to the popular \href{http://logging.apache.org/log4j/}{log4j} project. According to some benchmarks, it is faster and has a smaller footprint than all existing logging systems, sometimes by a wide margin.

\item \href{http://code.google.com/p/snakeyaml}{SnakeYAML}, a YAML parser and emitter for the Java programming language. YAML is a data serialization format designed for human readability and interaction with scripting languages. \arara uses YAML as the rule format.

\item \href{http://www.slf4j.org/}{SLF4J}, a simple facade or abstraction for various logging frameworks, allowing the end user to plug in the desired logging framework at deployment time.

\item \href{http://mvel.codehaus.org}{MVEL}, a powerful expression language for Java-based applications. It provides a plethora of features and is suited for everything from the smallest property binding and extraction, to full blown scripts. \arara relies on MVEL to provide the expansion mechanism for rules.

\item \href{http://maven.apache.org/}{Apache Maven}, a software project management and comprehension tool. Based on the concept of a project object model, Maven can manage a project's build, reporting and documentation from a central piece of information. 

\item \href{http://izpack.github.com}{IzPack}, a Java-based software installer builder that will run on any operating system coming with a Java Virtual Machine that is compliant with the Oracle JVM 1.5 or higher.
\end{enumerate}

A special thanks goes to my great friend Antoine Neveux for encouraging me to try out the \href{http://maven.apache.org}{Apache Maven} software project management. In the past, \arara was released as a NetBeans project, which is based on \href{http://ant.apache.org/}{Apache Ant}, another great tool from the Apache Foundation. Although I'm really fine with Ant, thanks to Maven, now it is way easier to build and to maintain the code. And it's always nice to learn another tool.

And at last but not least, I want to thank you, dear reader and potential user, 
for giving \arara a try. Do not despair if you don't succeed with \arara at first; just try again. I'm sure you will find your way. This humble project is opensource and it will always be. Let the bird be your guide through the journey to the typographic land. Have a good read.
% -------------------------------------------------

\cleardoublepage

% Release information
% -------------------------------------------------
\section*{Release information}

\subsection*{Version 2.0}
\begin{itemize}
\item[\newfeature] 
     Added the |--timeout n| flag to allow setting a timeout for every task. If
     the timeout is reached before the task ends, \arara will kill it and 
     interrupt the processing. The $n$ value is expressed in milliseconds.
\item[\bugfix] 
     Fixed the |--verbose| flag to behave as a realtime output.
\item[\newfeature] 
     There's no need of noninteractive commands anymore. \arara can now handle
     user input through the |--verbose| tag. If the flag is not set and the 
     command requires user interaction, the task execution is interrupted.
\item[\bugfix] 
     Fixed the execution of some script-based system commands to ensure 
     cross-platform compatibility.
\item[\newfeature] 
     Added the |@{SystemUtils}| orb tag to provide specific operating system 
     checks. The orb tag maps the |SystemUtils| class from the amazing 
     \href{http://commons.apache.org/lang/}{Apache Commons Lang} library and 
     all of its methods and properties.
\end{itemize}

{\renewcommand{\arraystretch}{1.5}
\begin{table}[ht]
\centering
\caption{Lines of code for version 2.0.}
\begin{tabular}{lrrrr}
\hline
\textbf{Language} & \textbf{Files} & \textbf{Blank} & \textbf{Comment} & \textbf{Code}\\
\hline
\hline
Java & 20 & 608 & 1642 & 848\\
XML & 1 & 0 & 0 & 12\\
\hline
Sum & 21 & 608 & 1642 & 860\\
\hline
\end{tabular}
\label{tab:locarara20}
\end{table}}

\subsection*{Version 1.0.1}

\begin{itemize}
\item[\newfeature] 
     Added support for |.tex|, |.dtx| and |.ltx| files. When no extension is 
     provided, \arara will automatically look for these extensions in this 
     specific order.
\item[\newfeature] 
     Added the |--verbose| flag to allow printing the complete log in the 
     terminal. A short |-v| tag is also available. Both |stdout| and |stderr| 
     are printed.
\item[\bugfix] 
     Fixed exit status when an exception is thrown. Now \arara also returns a 
     non-zero exit status when something wrong happened. Note that this 
     behaviour happens only when \arara is processing a file.
\end{itemize}

{\renewcommand{\arraystretch}{1.5}
\begin{table}[ht]
\centering
\caption{Lines of code for version 1.0.1.}
\begin{tabular}{lrrrr}
\hline
\textbf{Language} & \textbf{Files} & \textbf{Blank} & \textbf{Comment} & \textbf{Code}\\
\hline
\hline
Java & 20 & 585 & 1671 & 804\\
XML & 1 & 0 & 6 & 12\\
\hline
Sum & 21 & 585 & 1677 & 816\\
\hline
\end{tabular}
\label{tab:locarara101}
\end{table}}

\subsection*{Version 1.0}

\begin{itemize}
\item[\newfeature] First public release.
\end{itemize}

{\renewcommand{\arraystretch}{1.5}
\begin{table}[ht]
\centering
\caption{Lines of code for version 1.0.}
\begin{tabular}{lrrrr}
\hline
\textbf{Language} & \textbf{Files} & \textbf{Blank} & \textbf{Comment} & \textbf{Code}\\
\hline
\hline
Java & 20 & 524 & 1787 & 722\\
XML & 1 & 0 & 6 & 12\\
\hline
Sum & 21 & 524 & 1793 & 734\\
\hline
\end{tabular}
\label{tab:locarara10}
\end{table}}
% -------------------------------------------------

\cleardoublepage

% License
% -------------------------------------------------
\section*{License}
\label{sec:license}

\arara is licensed under the 
\href{http://www.opensource.org/licenses/bsd-license.php}{New BSD License}. It's
important to observe that the New BSD License has been verified as a 
GPL-compatible free software license by the 
\href{http://www.fsf.org/}{Free Software Foundation}, and has been vetted as an 
open source license by the 
\href{http://www.opensource.org/}{Open Source Initiative}.

\vfill

\begin{mdframed}[roundcorner=10pt,linecolor=araracolor,middlelinewidth=1pt]
\noindent
\begingroup
  \color{araracolor}\fontfamily{fco}\bfseries
  \arara \ -- the cool \TeX{} automation tool
\endgroup

\vspace{.5em}

\noindent Copyright \copyright{} 2012, Paulo Roberto Massa Cereda

\noindent All rights reserved.

\vspace{1em}

\noindent Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

\vspace{1em}

\begin{itemize}
\item Redistributions of source code must retain the above copyright notice, 
      this list of conditions and the following disclaimer.
\item Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
\end{itemize}

\vspace{1em}

\noindent\textsc{This software is provided by the copyright holders and 
contributors ``as is'' and any express or implied warranties, including, but not
 limited to, the implied warranties of merchantability and fitness for a 
particular purpose are disclaimed. In no event shall the copyright holder or 
contributors be liable for any direct, indirect, incidental, special, exemplary,
 or consequential damages (including, but not limited to, procurement of 
substitute goods or services; loss of use, data, or profits; or business 
interruption) however caused and on any theory of liability, whether in contract,
 strict liability, or tort (including negligence or otherwise) arising in any 
way out of the use of this software, even if advised of the possibility of such
damage.}
\end{mdframed}
% -------------------------------------------------

\cleardoublepage

\vspace*{25em}

\begin{flushright}
\em To my cat Fub√°, who loves birds.
\end{flushright}

\cleardoublepage

% TOC and list of codes
% -------------------------------------------------
\tableofcontents*

\cleardoublepage

\listoffigures*

\cleardoublepage

\listoftables*

\cleardoublepage

\listofcodes*
% -------------------------------------------------

\mainmatter

\part{The application}

\chapter{Introduction}
\section{What is arara}
\section{Features}
\section{Common uses}

\chapter{Installation}
\section{Prerequesites}
\section{Obtaining arara}
\section{Using the cross-platform installer}
\section{Manual installation}
\section{Updating arara}
\section{Uninstalling arara}

\chapter{Building from sources}
\section{Obtaining the sources}
\section{Building arara}
\section{Notes on the installer and wrapper}

\chapter{IDE integration}
\section{TeXworks}
\section{TeXnic Center}
\section{Kile}
\section{TeXmaker}
\section{TeXstudio}
\section{WinEdt}
\section{Inlage}

\chapter{Important concepts}
\section{Rules}
\section{Directives}
\section{Orb tags}

\chapter{Configuration file}
\section{Search paths}
\section{Language}
\section{File patterns}

\chapter{Running arara}
\section{Command line}
\section{Messages}
\section{Command output}
\section{Logging}

\part{For authors}

\chapter{Quick start}
\section{Predefined rules}
\section{Organizing directives}
\section{Best practices}

\chapter{Reference for rule library}
\section{Directives arguments}
\section{Special orb tags}

\part{For rulemakers}

\chapter{Quick start}
\section{Writing rules}
\section{Cross-platform rules}
\section{Best practices}

\chapter{Reference for rule library}
\section{Functions and methods}
\section{Notes on expansion}

\part{Structure and execution}

\chapter{Inside the rule format}
\section{Available fields}
\section{Expansion order}
\section{Processing rules}

\chapter{Inside the application}
\section{Looking for directives}
\section{Mapping directives to rules}
\section{Executing commands}

\end{document}
