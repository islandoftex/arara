<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Deploying the tool | arara </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
    :root {
        /* Primary theme color */
        --primary-color: #cbe368; /* #FED43F; */
        /* Primary theme text color */
        --primary-text-color: #543631;
        /* Primary theme link color */
        --primary-link-color: #719b25;
        /* Secondary color: the background body color */
        --secondary-color: #fcfaf6;
        --secondary-text-color: #303030;
        /* Highlight text color of table of content */
        --toc-highlight-text-color: #d46e13;
    }
</style>

    <link rel="icon" href="https://islandoftex.gitlab.io/arara/favicon.svg">
    <link rel="stylesheet" href="https://islandoftex.gitlab.io/arara/normalize.css">
    <link rel="stylesheet" href="https://islandoftex.gitlab.io/arara/juice.css">
    <link rel="stylesheet" href="https://islandoftex.gitlab.io/arara/fonts/fonts.css">
    <link rel="stylesheet" href="https://islandoftex.gitlab.io/arara/juicy-arara.css">
    
    <meta name="keywords" content="tex, latex, context, build tool, automation">
    <meta itemprop="name" content="The cool TeX automation tool">
    <meta itemprop="description" content="arara is a TeX automation tool based on directives and rules.">
    
  </head>

  <body>
    
<header class="box-shadow">
    

<a href="https://islandoftex.gitlab.io/arara/">
  <div class="logo">
    <img src="https://islandoftex.gitlab.io/arara/images/arara-text.svg" alt="logo">
  </div>
</a>

<nav>
  
  <a class="nav-item subtitle-text" href="https://islandoftex.gitlab.io/arara/changelog/">Changelog</a>
  
  <a class="nav-item subtitle-text" href="https://islandoftex.gitlab.io/arara/quickstart/">Quickstart</a>
  
  
  
  <a class="nav-item subtitle-text" href="https://islandoftex.gitlab.io/arara/manual">Manual</a>
  
  <a class="nav-item subtitle-text" href="https://islandoftex.gitlab.io/arara/news">News</a>
  
  <a class="nav-item subtitle-text" href="https://gitlab.com/islandoftex/arara">GitLab</a>
  
  
</nav>

</header>


    <main>
      
      
      
      
      
      <div class="toc">
        <div class="toc-sticky">
          
          <div class="toc-item">
            <a class="subtext" href="https://islandoftex.gitlab.io/arara/manual/deploying/#directory-structure">Directory structure</a>
          </div>
          
          
          <div class="toc-item">
            <a class="subtext" href="https://islandoftex.gitlab.io/arara/manual/deploying/#defining-a-location">Defining a location</a>
          </div>
          
          
          <div class="toc-item">
            <a class="subtext" href="https://islandoftex.gitlab.io/arara/manual/deploying/#tool-wrapping">Tool wrapping</a>
          </div>
          
          
        </div>
      </div>
      
      

      <div class="content text">
        
<div class="heading-text">Deploying the tool</div>
<p>As previously mentioned, arara runs on top of a Java virtual machine, available
on all major operating systems -- in some cases, you might need to install the
proper virtual machine. This chapter provides detailed instructions on how to
properly deploy the tool in your computer from either the official package
available in our project repository or a personal build generated from source
(as seen in <a href="https://islandoftex.gitlab.io/arara/manual/building/">Building</a>).</p>
<h1 id="directory-structure">Directory structure</h1>
<p>From the early development stages, our tool employs a very straightforward
directory structure. In short, we provide the <code>ARARA_HOME</code> alias to the
directory path in which the <code>arara.jar</code> Java archive file is located. This
particular file is the heart and soul of our tool and dictates the default rule
search path, which is a special directory named <code>rules</code> available from the same
level. This directory contains all rules specified in the YAML format. The
structure overview is presented as follows.</p>
<img src="https://islandoftex.gitlab.io/arara/images/manual/structure1.svg
" alt="Structure 1" width="648"/>
<p>Provided that this specific directory structure is honoured, the tool is ready
for use off the shelf. In fact, the official arara CTAN package is available in
the <a rel="noopener noreferrer" target="_blank" href="https://gitlab.com/islandoftex/arara/-/jobs/artifacts/master/download?job=publish:tdszip">artifacts
section</a>
of our project repository. Once the package is properly downloaded, we simply
need to extract it into a proper <code>ARARA_HOME</code> location.</p>
<h1 id="defining-a-location">Defining a location</h1>
<p>First and foremost, we need to obtain <code>master-ctan.zip</code> from our project
repository at GitLab, which is our CTAN package artifact. As the name indicates,
this is a compressed file format, so we need to extract it into a proper
location. Run the following commands in the terminal:</p>
<pre data-lang="sh" style="background-color:#ffffff;color:#010101;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#696989;">$</span><span> unzip master-ctan.zip
</span><span style="color:#696989;">$</span><span> unzip arara.tds.zip
</span><span style="color:#696989;">$</span><span> mv scripts/arara .
</span></code></pre>
<p>As a result of the previous commands, we obtained a directory named <code>arara</code> with
the exact structure presented in the previous section in our working directory
(amongst other files and directories that can be safely discarded). Now we need
to decide where arara should reside in our system. For example, I usually deploy
my tools inside the <code>/opt/islandoftex</code> path, so I need to run the following command in
the terminal (please note that my personal directory already has the proper
permissions, so I do not need superuser privileges):</p>
<pre data-lang="sh" style="background-color:#ffffff;color:#010101;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#696989;">$</span><span> mv arara /opt/islandoftex/
</span></code></pre>
<p>The tool has found a comfortable home inside my system! Observe that the full
path of the <code>ARARA_HOME</code> reference points out to <code>/opt/islandoftex/arara</code> since this
is my deployment location of choice. The resulting structure overview, from the
root directory, is presented as follows:</p>
<img src="https://islandoftex.gitlab.io/arara/images/manual/structure2.svg
" alt="Structure 1" width="896"/>
<p>If the tool was built from source (as indicated in
<a href="https://islandoftex.gitlab.io/arara/manual/building/">Building</a>), make sure to construct the provided directory
structure previously presented. We can test the deployment by running the
following command in the terminal (please note the full path):</p>
<pre data-lang="sh" style="background-color:#ffffff;color:#010101;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#696989;">$</span><span> java</span><span style="color:#696989;"> -jar</span><span> /opt/islandoftex/arara/arara.jar
</span><span style="color:#696989;">Usage:</span><span> arara </span><span style="color:#016692;">[</span><span>&lt;options&gt;</span><span style="color:#016692;">] &lt;</span><span>file</span><span style="color:#016692;">&gt;</span><span>...
</span><span>
</span><span>    </span><span style="color:#696989;">__</span><span> _ _ __ __ _ _ __ __ _
</span><span>   </span><span style="color:#696989;">/</span><span> _` </span><span style="color:#016692;">| </span><span style="color:#009f78;">&#39;__/ _` | &#39;</span><span style="color:#696989;">__/</span><span> _` </span><span style="color:#016692;">|
</span><span>  </span><span style="color:#016692;">| </span><span>(</span><span style="color:#696989;">_</span><span style="color:#016692;">| | | | </span><span>(</span><span style="color:#696989;">_</span><span style="color:#016692;">| | | | </span><span>(</span><span style="color:#696989;">_</span><span style="color:#016692;">| |
</span><span>   </span><span style="color:#333366;">\_</span><span style="color:#696989;">_,_</span><span style="color:#016692;">|</span><span style="color:#696989;">_</span><span style="color:#016692;">|  </span><span style="color:#333366;">\_</span><span style="color:#696989;">_,_</span><span style="color:#016692;">|</span><span style="color:#696989;">_</span><span style="color:#016692;">|  </span><span style="color:#333366;">\_</span><span style="color:#696989;">_,_</span><span style="color:#016692;">|
</span><span>
</span><span>  </span><span style="color:#696989;">The</span><span> cool TeX automation tool.
</span><span>
</span><span>  </span><span style="color:#696989;">arara</span><span> executes the TeX workflow you tell it to execute. Simply specify your
</span><span>  </span><span style="color:#696989;">needs</span><span> within your TeX file and let arara do the work. These directives
</span><span>  </span><span style="color:#696989;">feature</span><span> conditional execution and parameter expansion.
</span><span>
</span><span style="color:#696989;">Options:
</span><span>  </span><span style="color:#696989;">-l, --log</span><span>                     Generate a log output
</span><span>  </span><span style="color:#696989;">-v, --verbose</span><span> /</span><span style="color:#696989;"> -s</span><span>,</span><span style="color:#696989;"> --silent</span><span>  Print the command output
</span><span>  </span><span style="color:#696989;">-n, --dry-run</span><span>                 Go through all the motions of running a
</span><span>                                </span><span style="color:#696989;">command,</span><span> but with no actual calls
</span><span>  </span><span style="color:#696989;">-S, --safe-run</span><span>                Run in safe mode and disable potentially
</span><span>                                </span><span style="color:#696989;">harmful</span><span> features. Make sure your projects uses
</span><span>                                </span><span style="color:#696989;">only</span><span> allowed features.
</span><span>  </span><span style="color:#696989;">-w, --whole-file</span><span>              Extract directives in the file, not only in the
</span><span>                                </span><span style="color:#696989;">header
</span><span>  </span><span style="color:#696989;">-p, --preamble</span><span style="color:#016692;">=&lt;</span><span>text</span><span style="color:#016692;">&gt;</span><span>         Set the file preamble based on the
</span><span>                                </span><span style="color:#696989;">configuration</span><span> file
</span><span>  </span><span style="color:#696989;">-t, --timeout</span><span style="color:#016692;">=&lt;</span><span>int</span><span style="color:#016692;">&gt;</span><span>           Set the execution timeout (in milliseconds)
</span><span>  </span><span style="color:#696989;">-L, --language</span><span style="color:#016692;">=&lt;</span><span>text</span><span style="color:#016692;">&gt;</span><span>         Set the application language
</span><span>  </span><span style="color:#696989;">-m, --max-loops</span><span style="color:#016692;">=&lt;</span><span>int</span><span style="color:#016692;">&gt;</span><span>         Set the maximum number of loops (</span><span style="color:#016692;">&gt; </span><span style="color:#8c008a;">0</span><span>)
</span><span>  </span><span style="color:#696989;">-d, --working-directory</span><span style="color:#016692;">=&lt;</span><span>path</span><span style="color:#016692;">&gt;
</span><span>                                </span><span style="color:#696989;">Set</span><span> the working directory for all tools
</span><span>  </span><span style="color:#696989;">-P, --call-property</span><span style="color:#016692;">=&lt;</span><span>value</span><span style="color:#016692;">&gt;</span><span>   Pass parameters to the application to be used
</span><span>                                </span><span style="color:#696989;">within</span><span> the session.
</span><span>  </span><span style="color:#696989;">-F, --properties-file</span><span style="color:#016692;">=&lt;</span><span>path</span><span style="color:#016692;">&gt;</span><span>  Pass a properties file to the application to be
</span><span>                                </span><span style="color:#696989;">used</span><span> within the session.
</span><span>  </span><span style="color:#696989;">--generate-completion</span><span style="color:#016692;">=</span><span>(bash|zsh|fish)
</span><span>                                </span><span style="color:#696989;">Generate</span><span> a completion script for arara. Add
</span><span>                                </span><span style="color:#009f78;">&#39;source &lt;(arara --generate-completion &lt;shell&gt;)&#39;
</span><span>                                </span><span style="color:#696989;">to</span><span> your shell</span><span style="color:#009f78;">&#39;s init file.
</span><span style="color:#009f78;">  -V, --version                 Show the version and exit
</span><span style="color:#009f78;">  -h, --help                    Show this message and exit
</span><span style="color:#009f78;">
</span><span style="color:#009f78;">Arguments:
</span><span style="color:#009f78;">  &lt;file&gt;  The file(s) to evaluate and process
</span></code></pre>
<p>Please observe that, provided that the underlying operating system has an
appropriate Java virtual machine installed, arara can be used as a portable,
standalone application. Portable applications can be stored on any data storage
device, including external devices such as USB drives and floppy disks.</p>
<h1 id="tool-wrapping">Tool wrapping</h1>
<p>arara is now properly deployed in our system, but we still need to provide the
full path of <code>arara.jar</code> to the Java virtual machine in order to make our tool
work. This section provides three approaches regarding the creation of a
<em>wrapper</em>, a shell feature that embeds a system command or utility, that accepts
and passes a set of parameters to that command.</p>
<ul>
<li>
<p><strong>Shell alias:</strong> An <em>alias</em> is a command available in various shells which
enables a replacement of a word by another string. It is mainly used for
abbreviating a system command, or for adding default arguments to a
regularly used command. In order to create a shell alias for our tool, open
<code>.bashrc</code> (a script that is executed whenever a new terminal session starts
in interactive mode) in your favourite editor and add the following line,
preferably at the end:</p>
<pre data-lang="sh" style="background-color:#ffffff;color:#010101;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#7a7025;">alias </span><span style="color:#a15001;">arara</span><span style="color:#016692;">=</span><span style="color:#009f78;">&#39;java -jar /opt/islandoftex/arara/arara.jar&#39;
</span></code></pre>
<p>Save the file and restart your terminal. It is important to observe that the
given full path must be properly quoted if it contains spaces. There is no
need to provide explicit parameters, as an alias simply acts as an inline
string replacement.</p>
</li>
<li>
<p><strong>Shell function:</strong> A <em>shell function</em> is, as the name suggests, a subroutine,
a code block that implements a set of operations as a means to performs a
specified task. In order to create a shell function for our tool, open
<code>.bashrc</code> (a script that is executed whenever a new terminal session starts
in interactive mode) in your favourite editor and add the following line,
preferably at the end:</p>
<pre data-lang="sh" style="background-color:#ffffff;color:#010101;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#a15001;">arara</span><span>() {
</span><span>    </span><span style="color:#696989;">java -jar</span><span> /opt/islandoftex/arara/arara.jar </span><span style="color:#009f78;">&quot;$</span><span style="color:#756565;">@</span><span style="color:#009f78;">&quot;
</span><span>}
</span></code></pre>
<p>Save the file and restart your terminal. It is important to observe that the
given full path must be properly quoted if it contains spaces. Note that the
<code>$@</code> symbol used in the function body represents a special shell variable that
stores all the actual parameters in a list of strings.</p>
<blockquote style="padding: 20px; margin-top: 10px; margin-bottom: 10px;">
  <strong>Alias or function?</strong>
  <br/>
  In general, an alias should effectively not do more than change the default
options of a command, as it constitutes a mere string replacement. A function
should be used when you need to do something more complex than an alias. In
our particular case, as the underlying logic is pretty straightforward, both
approaches are valid.
</blockquote>
</li>
<li>
<p><strong>Script file:</strong> A <em>script</em> is a computer program designed to be run by an
interpreter. In our context, the script merely sets up the environment and
runs a system command. In order to provide a script for our tool, open your
favourite editor and create the following file called <code>arara</code> (no
extension):</p>
<pre data-lang="sh" style="background-color:#ffffff;color:#010101;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#898989;">#!/bin/bash
</span><span style="color:#696989;">jarpath</span><span style="color:#016692;">=</span><span style="color:#009f78;">/opt/islandoftex/arara/arara.jar
</span><span style="color:#696989;">java -jar </span><span style="color:#009f78;">&quot;$</span><span style="color:#756565;">jarpath</span><span style="color:#009f78;">&quot; &quot;$</span><span style="color:#756565;">@</span><span style="color:#009f78;">&quot;
</span></code></pre>
<p>It is important to observe that the given full path must be properly quoted if
it contains spaces. Note that the <code>$@</code> symbol used in the script body
represents a special shell variable that stores all the actual parameters in a
list of strings. This script file will act as the entry point for our
tool. Now, we need to make it executable (i.e, set the corresponding execute
permission) by running the following command in the terminal:</p>
<pre data-lang="sh" style="background-color:#ffffff;color:#010101;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#696989;">$</span><span> chmod +x arara
</span></code></pre>
<p>Now we need to move this newly executable script file to one of the
directories set forth in the <code>PATH</code> environment variable, where executable
commands are located. For illustrative purposes only, let us move the script
file to the <code>/usr/local/bin/</code> directory, a location originally designed for
programs that a normal user may run. Run the following command in the terminal
(note the need for superuser privileges):</p>
<pre data-lang="sh" style="background-color:#ffffff;color:#010101;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#696989;">$</span><span> sudo mv arara /usr/local/bin/
</span></code></pre>
<p>Alternatively, the script can be placed inside a special directory named
<code>bin/</code> from the home directory of the current user, which is usually added by
default to the system path. Observe that, in this particular case, superuser
privileges are not required, as the operation is kept at the current user
level. Run the following command in the terminal instead (please note that the
<code>~</code> symbol is a shell feature called <a rel="noopener noreferrer" target="_blank" href="https://www.gnu.org/software/bash/manual/html_node/Tilde-Expansion.html">tilde
expansion</a>
and refers to the home directory of the current user):</p>
<pre data-lang="sh" style="background-color:#ffffff;color:#010101;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#696989;">$</span><span> mv arara </span><span style="color:#696989;">~</span><span>/bin/
</span></code></pre>
<p>There is no need to restart your terminal, as the reference becomes available
as soon as it is moved to the new location. Note that a shell script can
provide a convenient variation of a system command where special environment
settings, command options, or post-processing apply automatically, but in a
way that allows the new script to still act as a fully normal Unix command.</p>
</li>
</ul>
<p>Regardless of the adopted approach, there should be an <code>arara</code> wrapper available
as an actual Unix command in your shell session. In order to test the wrapper,
run the following command in the terminal:</p>
<pre data-lang="sh" style="background-color:#ffffff;color:#010101;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#696989;">$</span><span> arara
</span><span style="color:#696989;">Usage:</span><span> arara </span><span style="color:#016692;">[</span><span>&lt;options&gt;</span><span style="color:#016692;">] &lt;</span><span>file</span><span style="color:#016692;">&gt;</span><span>...
</span><span>
</span><span>    </span><span style="color:#696989;">__</span><span> _ _ __ __ _ _ __ __ _
</span><span>   </span><span style="color:#696989;">/</span><span> _` </span><span style="color:#016692;">| </span><span style="color:#009f78;">&#39;__/ _` | &#39;</span><span style="color:#696989;">__/</span><span> _` </span><span style="color:#016692;">|
</span><span>  </span><span style="color:#016692;">| </span><span>(</span><span style="color:#696989;">_</span><span style="color:#016692;">| | | | </span><span>(</span><span style="color:#696989;">_</span><span style="color:#016692;">| | | | </span><span>(</span><span style="color:#696989;">_</span><span style="color:#016692;">| |
</span><span>   </span><span style="color:#333366;">\_</span><span style="color:#696989;">_,_</span><span style="color:#016692;">|</span><span style="color:#696989;">_</span><span style="color:#016692;">|  </span><span style="color:#333366;">\_</span><span style="color:#696989;">_,_</span><span style="color:#016692;">|</span><span style="color:#696989;">_</span><span style="color:#016692;">|  </span><span style="color:#333366;">\_</span><span style="color:#696989;">_,_</span><span style="color:#016692;">|
</span><span>
</span><span>  </span><span style="color:#696989;">The</span><span> cool TeX automation tool.
</span><span>
</span><span>  </span><span style="color:#696989;">arara</span><span> executes the TeX workflow you tell it to execute. Simply specify your
</span><span>  </span><span style="color:#696989;">needs</span><span> within your TeX file and let arara do the work. These directives
</span><span>  </span><span style="color:#696989;">feature</span><span> conditional execution and parameter expansion.
</span><span>
</span><span style="color:#696989;">Options:
</span><span>  </span><span style="color:#696989;">-l, --log</span><span>                     Generate a log output
</span><span>  </span><span style="color:#696989;">-v, --verbose</span><span> /</span><span style="color:#696989;"> -s</span><span>,</span><span style="color:#696989;"> --silent</span><span>  Print the command output
</span><span>  </span><span style="color:#696989;">-n, --dry-run</span><span>                 Go through all the motions of running a
</span><span>                                </span><span style="color:#696989;">command,</span><span> but with no actual calls
</span><span>  </span><span style="color:#696989;">-S, --safe-run</span><span>                Run in safe mode and disable potentially
</span><span>                                </span><span style="color:#696989;">harmful</span><span> features. Make sure your projects uses
</span><span>                                </span><span style="color:#696989;">only</span><span> allowed features.
</span><span>  </span><span style="color:#696989;">-w, --whole-file</span><span>              Extract directives in the file, not only in the
</span><span>                                </span><span style="color:#696989;">header
</span><span>  </span><span style="color:#696989;">-p, --preamble</span><span style="color:#016692;">=&lt;</span><span>text</span><span style="color:#016692;">&gt;</span><span>         Set the file preamble based on the
</span><span>                                </span><span style="color:#696989;">configuration</span><span> file
</span><span>  </span><span style="color:#696989;">-t, --timeout</span><span style="color:#016692;">=&lt;</span><span>int</span><span style="color:#016692;">&gt;</span><span>           Set the execution timeout (in milliseconds)
</span><span>  </span><span style="color:#696989;">-L, --language</span><span style="color:#016692;">=&lt;</span><span>text</span><span style="color:#016692;">&gt;</span><span>         Set the application language
</span><span>  </span><span style="color:#696989;">-m, --max-loops</span><span style="color:#016692;">=&lt;</span><span>int</span><span style="color:#016692;">&gt;</span><span>         Set the maximum number of loops (</span><span style="color:#016692;">&gt; </span><span style="color:#8c008a;">0</span><span>)
</span><span>  </span><span style="color:#696989;">-d, --working-directory</span><span style="color:#016692;">=&lt;</span><span>path</span><span style="color:#016692;">&gt;
</span><span>                                </span><span style="color:#696989;">Set</span><span> the working directory for all tools
</span><span>  </span><span style="color:#696989;">-P, --call-property</span><span style="color:#016692;">=&lt;</span><span>value</span><span style="color:#016692;">&gt;</span><span>   Pass parameters to the application to be used
</span><span>                                </span><span style="color:#696989;">within</span><span> the session.
</span><span>  </span><span style="color:#696989;">-F, --properties-file</span><span style="color:#016692;">=&lt;</span><span>path</span><span style="color:#016692;">&gt;</span><span>  Pass a properties file to the application to be
</span><span>                                </span><span style="color:#696989;">used</span><span> within the session.
</span><span>  </span><span style="color:#696989;">--generate-completion</span><span style="color:#016692;">=</span><span>(bash|zsh|fish)
</span><span>                                </span><span style="color:#696989;">Generate</span><span> a completion script for arara. Add
</span><span>                                </span><span style="color:#009f78;">&#39;source &lt;(arara --generate-completion &lt;shell&gt;)&#39;
</span><span>                                </span><span style="color:#696989;">to</span><span> your shell</span><span style="color:#009f78;">&#39;s init file.
</span><span style="color:#009f78;">  -V, --version                 Show the version and exit
</span><span style="color:#009f78;">  -h, --help                    Show this message and exit
</span><span style="color:#009f78;">
</span><span style="color:#009f78;">Arguments:
</span><span style="color:#009f78;">  &lt;file&gt;  The file(s) to evaluate and process
</span></code></pre>
<p>It is important to observe that the wrapper initiative presented in this section
might cause a potential name clash with existing TeX Live or MiKTeX binaries and
symbolic links. In this particular scenario, make sure to inspect the command
location as a means to ensure a correct execution. To this end, run the
following command in the terminal:</p>
<pre data-lang="sh" style="background-color:#ffffff;color:#010101;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#696989;">$</span><span> which arara
</span><span style="color:#696989;">/usr/local/bin/arara
</span></code></pre>
<p>The <code>which</code> command shows the full path of the executable name provided as
parameter. This particular utility does this by searching for an executable or
script in the directories listed in the <code>PATH</code> environment variable. Be mindful
that aliases and shell functions are listed as well.</p>


      </div>

    </main>

    
    <footer>
      <small class="subtext">
        arara by the Island of TeX
      </small>
    </footer>
    
  </body>
  <script>
    function highlightNav(heading) {
        let pathname = location.pathname;
        document.querySelectorAll(".toc a").forEach((item) => {
            item.classList.remove("active");
        });
        document.querySelector(".toc a[href$='" + pathname + "#" + heading + "']").classList.add("active");
    }

    let currentHeading = "";
    window.onscroll = function () {
        let h = document.querySelectorAll("h1,h2,h3,h4,h5,h6");
        let elementArr = [];

        h.forEach(item => {
            if (item.id !== "") {
                elementArr[item.id] = item.getBoundingClientRect().top;
            }
        });
        elementArr.sort();
        for (let key in elementArr) {
            if (!elementArr.hasOwnProperty(key)) {
                continue;
            }
            if (elementArr[key] > 0 && elementArr[key] < 300) {
                if (currentHeading !== key) {
                    highlightNav(key);
                    currentHeading = key;
                }
                break;
            }
        }
    }
  </script>
</html>
