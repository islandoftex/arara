// SPDX-License-Identifier: BSD-3-Clause
package org.islandoftex.arara.build

import org.gradle.api.tasks.bundling.Zip

/**
 * Create a CTAN-ready zip file, i.e. zip up the CTAN
 * directory generated by the [CTANTreeBuilderTask].
 */
open class CTANZipBuilderTask : Zip() {
    init {
        group = "distribution"
        description = "Create a CTAN-ready ZIP file."

        inputs.dir(project.layout.buildDirectory.dir("ctan").get().asFile)
        outputs.file(project.layout.buildDirectory.file("arara-ctan.zip").get().asFile)
        outputs.upToDateWhen { false }

        archiveFileName.set(project.layout.buildDirectory.file("arara-ctan.zip").get().asFile.absolutePath)
        from(project.layout.buildDirectory.dir("ctan").get().asFile)
    }
}
